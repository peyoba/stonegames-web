# Stone Games 游戏导航网站需求文档

> **文档更新说明**：本文档已于当前日期更新，根据项目实际实现状态调整了技术方案、部署流程和项目功能说明。请以本文档为准进行后续开发。

## 项目概述

Stone Games是一个简单的游戏导航网站，通过iframe方式嵌入各种网页游戏，为用户提供便捷的游戏发现和体验平台。网站默认提供英文界面，同时支持中文语言切换，便于全球用户访问。

## 项目目标

1. 创建一个简洁易用的游戏导航平台
2. 通过iframe无缝嵌入网页游戏
3. 提供多语言支持（默认英文，支持中文）
4. 实现便捷的管理员后台，方便游戏内容管理
5. 部署之后绑定aistone.org域名

## 核心功能需求

### 用户端功能

1. **首页展示**
   - 游戏列表（图片+名称+简介）
   - 游戏分类导航
   - 语言切换功能（英文/中文）
   - 响应式设计（适配移动端和桌面端）

2. **游戏页面**
   - iframe游戏嵌入
   - 游戏信息展示
   - 返回首页功能
   - 全屏/调整尺寸选项

### 管理员功能

1. **管理员登录**
   - 安全的登录界面
   - 会话管理

2. **游戏管理**
   - 添加新游戏（表单提交）
   - 编辑现有游戏信息
   - 删除游戏
   - 设置游戏发布状态（显示/隐藏）

3. **分类管理**
   - 创建/编辑/删除游戏分类
   - 设置中英文分类名称，只需要输入中文部分或者英文部分，自动翻译到对应的语言

## 技术方案

### 前端技术栈
- **核心框架**: Next.js 14 (App Router)
  - 基于 React，生态丰富
  - 内置 SSR/SSG，性能优秀
  - 文件系统路由，开发体验好
  - 支持国际化（i18n）开箱即用
  - 部署简单，支持 Vercel 一键部署

- **UI 框架**: Tailwind CSS + Shadcn/ui
  - Tailwind CSS 原子化 CSS，开发效率高
  - Shadcn/ui 提供精美的组件库
  - 完全可定制，符合国际设计趋势
  - 响应式设计支持完善

- **状态管理**: Zustand
  - 轻量级，学习成本低
  - 支持 TypeScript
  - 适合中小型应用

- **国际化方案**: next-intl
  - 与 Next.js 完美集成
  - 支持路由国际化
  - 性能好，使用简单

### 数据管理
- **数据库**: MongoDB Atlas (免费版)
  - 免费额度：512MB 存储空间
  - 支持复杂查询
  - 数据模型灵活
  - 支持地理位置查询
  - 适合游戏数据存储
  - **连接配置**:
    - 连接字符串格式: `mongodb+srv://[用户名]:[密码]@[服务器地址]/[数据库名]?[参数]`
    连接字符串：`mongodb+srv://peyoba660703stonegames:<db_password>@aistonegamescluster.cz1foe5.mongodb.net/?retryWrites=true&w=majority&appName=AIstonegamescluster`
    - 必要参数: 
      - `retryWrites=true` (启用重试写入)
      - `w=majority` (写入确认级别)
      - `authSource=admin` (认证数据库)
      - `appName=AIstonegamescluster` (应用名称)

- **ORM**: Prisma
  - 类型安全
  - 自动生成 API
  - 支持 MongoDB
  - 开发体验好
  - **使用注意**:
    - 需要保持 `.env` 和 `.env.local` 的数据库连接字符串一致
    - 修改 Schema 后需运行 `npx prisma generate` 更新客户端
    - 使用 `test-db.js` 测试数据库连接

### 认证方案
- **认证框架**: NextAuth.js
  - 与 Next.js 完美集成
  - 支持多种认证方式
  - 安全性高
  - 配置简单

### 部署方案
- **开发环境部署**: Vercel
  - 用于开发和测试阶段
  - 快速部署和预览
  - 开发体验好
  - 自动构建和部署

- **生产环境部署**: Cloudflare Pages
  - 完全免费
  - 国内访问速度快
  - 部署简单
  - 与 Next.js 完美兼容
  - 无需科学上网
  - 包含功能：
    - 无限网站
    - 无限请求
    - 无限带宽
    - 全球 CDN

- **域名和 CDN**: Cloudflare
  - DNS 服务
  - CDN 加速
  - DDoS 防护
  - SSL 证书
  - 自定义域名：aistone.org

### 开发工具
- **包管理器**: pnpm
  - 速度快
  - 节省磁盘空间
  - 依赖管理更严格

- **代码规范**: ESLint + Prettier
  - 保证代码质量
  - 统一代码风格
  - 自动格式化

### 性能优化
- **图片优化**: Next.js Image 组件
- **字体优化**: next/font
- **缓存策略**: React Query + SWR

### 监控方案
- **错误监控**: Sentry (免费版)
  - 每月 5,000 错误事件
  - 7 天数据保留
  - 基本功能

 ### GitHub远程仓   https://github.com/peyoba 

## 开发流程

### 1. 前期准备
- 安装必要的开发工具
- 配置开发环境
- 创建项目框架

### 2. 开发阶段
- 开发简单原型
- 收集用户反馈
- 逐步完善功能
- 持续优化体验

### 3. 测试阶段
- 全面功能测试
- Bug修复
- 性能优化
- 用户体验优化

### 4. 上线阶段
- 服务器部署
- 域名配置
- 系统监控
- 性能监控

### 5. 维护阶段
- 定期系统检查
- 及时问题修复
- 功能更新迭代
- 性能持续优化

## 成本分析

### 免费资源
1. Next.js 框架
2. Tailwind CSS + Shadcn/ui
3. Zustand
4. Prisma
5. NextAuth.js
6. next-intl
7. Cloudflare Pages（完全免费）
8. MongoDB Atlas 基础版
9. Sentry 基础版

### 可能产生费用的服务（按需付费）
1. MongoDB Atlas（超出免费额度）
2. 域名费用（aistone.org，每年约 100-200 元）
3. Sentry（超出免费事件数）

## 项目优势

1. **技术先进**
   - 使用最新技术栈
   - 性能优秀
   - SEO友好

2. **开发效率**
   - 完善的开发工具
   - 丰富的组件库
   - 自动化部署

3. **维护成本**
   - 初期完全免费
   - 按需付费
   - 维护简单

4. **扩展性**
   - 易于添加新功能
   - 支持微服务架构
   - 集成第三方服务方便

## 注意事项

1. **代码质量与注释**
   - 所有代码必须添加详细的中文注释
   - 文件顶部添加整体功能说明
   - 每个函数添加功能说明和参数说明
   - 复杂逻辑添加详细解释
   - 重要变量添加用途说明
   - 关键步骤添加注释
   - 注释要清晰易懂，避免歧义

2. **安全性**
   - 保证网站安全性
   - 定期备份数据
   - 防止 SQL 注入
   - 防止 XSS 攻击
   - 实现 CSRF 防护
   - 加密敏感数据

3. **用户体验**
   - 优化用户体验
   - 确保响应式设计
   - 添加加载状态
   - 优化错误提示
   - 实现平滑过渡

4. **系统维护**
   - 定期检查系统状态
   - 及时处理问题
   - 监控系统性能
   - 优化资源使用

5. **沟通反馈**
   - 保持与用户的及时沟通
   - 收集用户反馈
   - 及时响应用户需求
   - 定期更新功能

## 数据结构

## 详细开发计划

### 第一阶段：项目初始化与环境搭建（预计2天）

1. **开发环境配置**
   - 安装 Node.js 和 pnpm
   - 安装开发工具（VS Code）
   - 配置 Git 环境
   - 创建 GitHub 仓库

2. **项目初始化**
   - 使用 Next.js 创建项目
   - 配置 TypeScript
   - 安装并配置 Tailwind CSS
   - 设置 ESLint 和 Prettier
   - 配置项目目录结构

3. **基础框架搭建**
   - 配置路由系统
   - 设置布局组件
   - 配置国际化框架
   - 设置状态管理
   - 配置数据库连接

### 第二阶段：核心功能开发（预计7天）

1. **数据库设计与实现**
   - 设计游戏数据模型
   - 设计分类数据模型
   - 设计用户数据模型
   - 实现数据库迁移
   - 创建基础 API

2. **用户界面开发**
   - 实现响应式布局
   - 开发导航栏组件
   - 开发游戏卡片组件
   - 开发分类导航组件
   - 实现语言切换功能

3. **游戏展示功能**
   - 实现游戏列表页面
   - 开发游戏详情页面
   - 实现 iframe 嵌入功能
   - 添加全屏控制
   - 实现游戏搜索功能

### 第三阶段：管理员功能开发（预计5天）

1. **认证系统**
   - 实现管理员登录
   - 配置会话管理
   - 添加权限控制
   - 实现安全防护

2. **管理后台**
   - 开发游戏管理界面
   - 实现游戏 CRUD 操作
   - 开发分类管理界面
   - 实现分类 CRUD 操作
   - 添加数据验证

3. **内容管理**
   - 实现游戏状态管理
   - 添加批量操作功能
   - 实现数据导入导出
   - 添加操作日志

### 第四阶段：优化与测试（预计3天）

1. **性能优化**
   - 优化图片加载
   - 实现数据缓存
   - 优化首屏加载
   - 添加加载动画

2. **测试与调试**
   - 编写单元测试
   - 进行集成测试
   - 进行性能测试
   - 修复发现的问题

3. **用户体验优化**
   - 优化页面过渡
   - 添加错误处理
   - 优化移动端体验
   - 完善交互反馈

### 第五阶段：部署与上线（预计2天）

1. **部署准备**
   - 配置生产环境
   - 设置环境变量
   - 准备部署文档
   - 配置监控系统

2. **部署上线**
   - 开发环境部署到 Vercel
   - 生产环境部署到 Cloudflare Pages
   - 配置 Cloudflare DNS
   - 设置 SSL 证书
   - 配置 CDN

3. **上线后工作**
   - 监控系统运行
   - 收集用户反馈
   - 修复发现的问题
   - 优化系统性能

### 时间安排

- 总开发时间：约19天
- 预留缓冲时间：3天
- 总计项目周期：约22天

### 里程碑

1. **第一周**
   - 完成环境搭建
   - 完成基础框架
   - 实现核心UI组件

2. **第二周**
   - 完成游戏展示功能
   - 实现数据库操作
   - 开发管理后台

3. **第三周**
   - 完成所有功能开发
   - 进行系统优化
   - 准备部署上线

4. **第四周**
   - 系统部署上线
   - 收集用户反馈
   - 进行问题修复

### 风险管理

1. **技术风险**
   - 新技术学习曲线
   - 第三方服务稳定性
   - 性能优化挑战

2. **项目风险**
   - 需求变更
   - 时间延误
   - 资源限制

3. **应对策略**
   - 提前进行技术预研
   - 保持与用户沟通
   - 预留缓冲时间
   - 建立应急预案

